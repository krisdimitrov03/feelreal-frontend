<div class="profile-container">
    @if ((profile$ | async); as profile) {
    <div class="profile">
        <div class="profile__header">
            <h1 class="profile__title"><i class="fas fa-user-circle"></i> Manage Profile</h1>
        </div>
        <div class="profile__content">
            <form [formGroup]="form" (ngSubmit)="onUpdate()">
                <div class="form-row">
                    <div class="input-group">
                        <input type="text" placeholder="Username" formControlName="username" name="username" />
                        <label for="username">Username</label>
                    </div>
                    <div class="input-group">
                        <input type="email" placeholder="Email" formControlName="email" name="email" />
                        <label for="email">Email</label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="input-group">
                        <input type="text" placeholder="First Name" formControlName="firstName" name="firstName" />
                        <label for="firstName">First Name</label>
                    </div>
                    <div class="input-group">
                        <input type="text" placeholder="Last Name" formControlName="lastName" name="lastName" />
                        <label for="lastName">Last Name</label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="input-group">
                        <input type="date" placeholder="Date of Birth" formControlName="dateOfBirth" name="dateOfBirth" />
                        <label for="dateOfBirth">Date of Birth</label>
                    </div>
                    <div class="input-group">
                        <select formControlName="jobId" class="styled-select" name="jobId">
                            <option value="" disabled selected>Occupation</option>
                            @for (job of (jobs$ | async); track $index) {
                            <option [value]="job.id">{{ job.name }}</option>
                            }
                        </select>
                        <label for="jobId">Job</label>
                    </div>
                </div>
                <div class="form-row full-width profile__buttons">
                    <button type="submit" class="cta-button"><i class="fas fa-save"></i> Save</button>
                    <button class="delete-button" (click)="openModal()"><i class="fas fa-trash-alt"></i> Delete Profile</button>
                </div>
            </form>
        </div>
    </div>
    } @else {
    <div class="loader">Loading...</div>
    }
  </div>
  
  <div id="deleteModal" class="modal">
    <div class="modal-content">
      <span class="close" (click)="closeModal()">&times;</span>
      <h2><i class="fas fa-exclamation-circle"></i> Are you sure you want to delete your profile?</h2>
      <div class="modal-buttons">
        <button class="cta-button" (click)="onDelete($event)"><i class="fas fa-check-circle"></i> Yes, delete it</button>
        <button class="cancel-button" (click)="closeModal()"><i class="fas fa-times-circle"></i> Cancel</button>
      </div>
    </div>
  </div>
  